# Table and Permissions

We need a table to store the to-dos that our application will manage, and also correct permissions on querying and inserting them. Hasura Console to the rescue.

> Hasura Console is where you manage your project's database and GraphQL API.

## Hasura Console

On your project's dashboard, click on the `Hasura` option on the left-side menu. You will find details of the Hasura installation, as well as an option to add `Environment Variables`. Go ahead and copy Hasura's `Admin secret` and use it to login to the `Hasura console URL`.

![Nhost Hasura](/images/backend/open-hasura.png)

## Create `todos` table

Go to the `DATA` tab in the top menu and click `Create table`.

We'll create a `todos` table with the following columns:

| Name       | Type      | Default value     |
| :--------- | :-------- | :---------------- |
| id         | UUID      | gen_random_uuid() |
| created_at | Timestamp | now()             |
| name       | Text      |                   |
| completed  | Boolean   | false             |

For the `id` and `created_at` columns you can either create them manually or use the `Frequently used columns` option that is at the bottom of the `Columns` section. This makes sure those columns are automatically generated when new data is inserted. 

![Frequently used columns in the Hasura console](/images/backend/frequently-used-columns.png)

`name` (Text) and `completed` (Boolean) should be manually created as per the table above. Make sure you set the default value for `completed` to `false`.

![Create a table in the Hasura console](/images/backend/create-table.png)

Scroll down and click `Add table`.

### Query Data

To make sure that we have a working GraphQL API, we will now insert a couple of to-dos. Navigate to the `Insert Row` tab and create some to-dos by writing a name and clicking on `save` multiple times (see the animation bellow).

![Insert todos](/images/backend/insert-todos.gif)

With to-dos in place, go back to the Nhost console and click on the `GraphQL API` option on the left-side menu. Copy-and-paste the following query and hit play.

```graphql
query {
  todos {
    id
    created_at
    name
    completed
  }
}
```

The to-dos you just created should now be be part of the response shown on the right.

## Set Permissions

Currently, the only way to query to-dos is as admin with the admin-secret (`x-hasura-admin-secret`). We'll now set permissions so that **anyone** (`public`) can insert and select todos.

In the Hasura Console, go to your `todos` table and click on `Permissions`. We will now set **insert** and **select** permissions for the **public** role.

> The `public` role is used with users that are not logged in.

### Insert Permissions

Allow anyone to insert **without any checks** and to insert **name**. The other columns (id, created_at, completed) will be set using default values.

![Hasura permissions public insert](/images/backend/permissions-public-insert.png)

### Select Permissions

Allow anyone to select **without any checks** and to select all columns.

![Hasura permissions public insert](/images/backend/permissions-public-select.png)

---

Now anyone can insert and select todos. This is not secure, but it's a good start. We'll secure our backend later when we add authentication.

## Next

[App](/quick-start/app)
