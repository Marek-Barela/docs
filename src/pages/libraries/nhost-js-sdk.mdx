---
title: "Nhost JS SDK"
publishedAt: "2020-11-12"
description: Nhost JS SDK to handle Auth and Storage.
---

> JavaScript SDK for handling **Auth** and **Storage**.

## Installation

```bash
$ npm install nhost-js-sdk
```

or

```bash
$ yarn add nhost-js-sdk
```

## Setup

```js:/src/utils/nhost
import { createClient } from "nhost-js-sdk";

const nhostClient = createClient({
  baseURL: "https://backend-url.nhost.app",
})

const auth = nhost.auth;
const storage = nhost.storage;

export { auth, storage };
```

To use cookies (not recomended), pass `useCookies: true` to the client:

```js
const nhostClient = createClient({
  baseURL: "https://backend-url.nhost.app",
  useCookies: true,
})
```

## Usage

```js
import { auth, storage } from "src/utils/nhost";
```

## Auth

### Register

Creates a user 

```js
auth.register({ email, password });

// pass in options
auth.register({ email, password, { userData: { display_name: "Joe Doe", role: }} });
```

| Parameters |        |          |   |   |
|------------|--------|----------|---|---|
| email      | string | required |   |   |
| password   | string | required |   |   |
| options    | object | optional |   |   |

### Login

Logins a user

```js
auth.login({ email, password });

// or with a OAuth provider: google | github | linkedin ...
auth.login({ provider })
```

### Logout

Logouts a user

```js
auth.logout();
```

### onAuthStateChanged

Registers a callback to run when the auth state changes (e.g., when a user logouts)

```js
auth.onAuthStateChanged((loggedIn) => {
  console.log("auth state changed!");
  console.log({ loggedIn });
});
```

### isAuthenticated

Returns whether the user is authenticated.

```js
auth.isAuthenticated();
```

- `true` means the user is logged in
- `false` means the user is not logged in
- `null` means that a request to login the user is ongoing.

### Get JWT token

Returns the current user session's JWT token

```js
auth.getJWTToken();
```

### Get Claim

Returns a claim from the JWT token

```js
auth.getClaim("x-hasura-user-id");
```

### Activate account

Activates an account

```js
auth.activate(<ticket>);
```

### Change Email

> The user must be logged in

Changes a user's email 

```js
auth.changeEmail(new_email);
```

### Request Change Email


```js
auth.changeEmailRequest(new_email);
```

### Change to requested email


```js
auth.changeEmailChange(ticket);
```

### Change password

Requests a password change

```js
auth.changePassword(old_password, new_password);
```

### Request new password

Requests a new password

```js
auth.changePasswordRequest(email);
```

### Change password using ticket

```js
auth.changePasswordChange(new_password, ticket);
```

### Generate MFA QR-code

> User must be logged in.

```js
auth.MFAGenerate();
```

### Enable MFA

Enables MFA

```js
auth.enable(code);
```

### Disable MFA

Disables MFA

```js
auth.disable(code);
```

### Login using TOTP

> `ticket` comes from the `auth.login()` response if the user has MFA enabled.

```js
auth.MFATotp(code, ticket);
```

## Storage

### Upload

Uploads a file

```js
storage.put(path, file, metadata?, onUploadProgress?);
```

### Delete

Deletes a file 

```js
storage.delete(path);
```

### Get metadata

Retrieves data related to the file

```js
storage.getMetadata(path);
```

## Setup in different environments

### React Native

Install:

```bash
$ yarn add @react-native-community/async-storage
```

More info: [https://react-native-community.github.io/async-storage/docs/install](https://react-native-community.github.io/async-storage/docs/install).

```js
import nhost from "nhost-js-sdk";
import AsyncStorage from "@react-native-community/async-storage";

const config = {
  baseUrl: "https://backend-url.nhost.app",
  clientStorage: AsyncStorage,
  clientStorageType: "react-native",
};

nhost.initializeApp(config);

const auth = nhost.auth();
const storage = nhost.storage();

export { auth, storage };
```

### Ionic

```js
import createClient from "nhost-js-sdk";
import { Plugins } from "@capacitor/core";
const { Storage } = Plugins;

const nhostClient = createClient({
  baseURL: "https://backend-url.nhost.app",
  clientStorage: Storage,
  clientStorageType: "capacitor
})

const auth = nhost.auth;
const storage = nhost.storage;

export { auth, storage };
```

### Expo

Install:

```bash
$ expo install expo-secure-store
```

More info: [https://docs.expo.io/versions/latest/sdk/securestore/](https://docs.expo.io/versions/latest/sdk/securestore/).

```js
import createClient from "nhost-js-sdk";
import * as SecureStore from "expo-secure-store";

const nhostClient = createClient({
  baseURL: "https://backend-url.nhost.app",
  clientStorage: SecureStore,
  clientStorageType: "expo-secure-storage",
})

const auth = nhost.auth;
const storage = nhost.storage;

export { auth, storage };
```
