---
title: "Nhost JS SDK"
publishedAt: "2020-11-12"
description: Nhost JS SDK to handle Auth and Storage.
---

> JavaScript SDK for handling **Auth** and **Storage**

## Installation

```bash
$ npm install nhost-js-sdk
```

or

```bash
$ yarn add nhost-js-sdk
```

## Setup

```js:/src/utils/nhost
import { createClient } from "nhost-js-sdk";

const nhostClient = createClient({
  baseURL: "https://backend-url.nhost.app",
})

const auth = nhost.auth;
const storage = nhost.storage;

export { auth, storage };
```


| Parameters     |               |          |                                                                                         |   |
|--------------------------|---------------|----------|-----------------------------------------------------------------------------------------|---|
| *baseURL*                  | string        | required | Backend URL                                                                             |   |
| *useCookies*               | boolean       | optional | Use cookies for auth (defaults to `false`)                                              |   |
| *ssr*                      | boolean       | optional | Enable server-side rendering mode (defaults to `typeof window === "undefined"`) |   |
| *autoLogin*                | boolean       | optional | Auto logins user (defaults to `true`)                                                     |   |
| *clientStorage*            | ClientStorage | optional | Storage to use (defaults to `Window.localStorage`)                                      |   |
| *clientStorageType*        | string        | optional | Storage type (defaults to `web`)                                                        |   |


## Usage

```js
import { auth, storage } from "src/utils/nhost";
```

### Auth

Creating new users can be done with `register()`

```js
auth.register({ email, password });

// with options
auth.register({ email, password, { userData: { display_name: "Joe Doe", role: }} });
```

> When using OAuth a user's account is created on first login

Existing users can login with email and password or using an OAuth provider

```js
auth.login({ email, password });

// OAuth provider: google | github | linkedin ...
auth.login({ provider })
```

Users can logout via `logout()`

```js
auth.logout();
```

Registering a callback to run when the auth state changes (e.g., when a user logouts) is done via `onAuthStateChanged()`

```js
auth.onAuthStateChanged((loggedIn) => {
  console.log("auth state changed!");
  console.log({ loggedIn });
});
```

To know whether a user is logged in or not use `isAuthenticated()`

```js
auth.isAuthenticated();
```

- `true` means the user is logged in
- `false` means the user is not logged in
- `null` means that a request to login the user is ongoing.

For getting the session's JWT Token use `getJWTToken()`

```js
auth.getJWTToken();
```

and for its claims use `getClaim()`

```js
auth.getClaim("x-hasura-user-id");
```

Activating an account is done via `activate()`

```js
auth.activate(<ticket>);
```

For changing an account's email address without confirmation use `changeEmail()`

```js
// the user needs to be logged in
auth.changeEmail(new_email);
```

or with a confirmation email use `requestEmailChange()`

```js
auth.requestEmailChange(new_email);
```

finally, to confirm the email change use `confirmEmailChange()` with the ticket received on the email

```js
auth.confirmEmailChange(ticket);
```

For changing a user's password use `changePassword()`

```js
auth.changePassword(old_password, new_password);
```

or with a confirmation email use `requestPasswordChange()`

```js
auth.requestPasswordChange(email);
```

finally, to confirm the password change use `confirmPasswordChange()`

```js
auth.confirmPasswordChange(new_password, ticket);
```

To generate a MFA QR-code use `MFAGenerate()`

```js
// the user needs to be logged in
auth.MFAGenerate();
```

Enabling MFA is done via `enable()`

```js
auth.enable(code);
```

And disabling is done via `disable()`

```js
auth.disable(code);
```

To login using MFA TOTP use `MFATotp()`

```js
// the ticket is returned by `login()` when the user has MFA enabled
auth.MFATotp(code, ticket);
```

### Storage

Uploading a file is done using `put()`

```js
storage.put(path, file, metadata?, onUploadProgress?);
```

To delete a file simply issue `delete()`

```js
storage.delete(path);
```

To get a file's metadata use `getMetadata()`

```js
storage.getMetadata(path);
```

### Other environments

#### React Native

Install:

```bash
$ yarn add @react-native-community/async-storage
```

Installation instructions can be found at [https://react-native-community.github.io/async-storage/docs/install](https://react-native-community.github.io/async-storage/docs/install).

```js
import nhost from "nhost-js-sdk";
import AsyncStorage from "@react-native-community/async-storage";

const config = {
  baseUrl: "https://backend-url.nhost.app",
  clientStorage: AsyncStorage,
  clientStorageType: "react-native",
};

nhost.initializeApp(config);

const auth = nhost.auth();
const storage = nhost.storage();

export { auth, storage };
```

#### Ionic

```js
import createClient from "nhost-js-sdk";
import { Plugins } from "@capacitor/core";
const { Storage } = Plugins;

const nhostClient = createClient({
  baseURL: "https://backend-url.nhost.app",
  clientStorage: Storage,
  clientStorageType: "capacitor
})

const auth = nhost.auth;
const storage = nhost.storage;

export { auth, storage };
```

#### Expo

Install:

```bash
$ expo install expo-secure-store
```

More info: [https://docs.expo.io/versions/latest/sdk/securestore/](https://docs.expo.io/versions/latest/sdk/securestore/).

```js
import createClient from "nhost-js-sdk";
import * as SecureStore from "expo-secure-store";

const nhostClient = createClient({
  baseURL: "https://backend-url.nhost.app",
  clientStorage: SecureStore,
  clientStorageType: "expo-secure-storage",
})

const auth = nhost.auth;
const storage = nhost.storage;

export { auth, storage };
```
