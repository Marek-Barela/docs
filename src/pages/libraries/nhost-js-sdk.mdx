---
title: "Nhost JS SDK"
publishedAt: "2020-11-12"
description: Nhost JS SDK to handle Auth and Storage.
---

Nhost JS SDK is used to handle **Auth** and **Storage**.

## Installation

```bash
$ npm install nhost-js-sdk
```

or

```bash
$ yarn add nhost-js-sdk
```

## Setup

```js:/src/utils/nhost
import createClient from "nhost-js-sdk";

const nhostClient = createClient({
  baseURL: "https://backend-REPLACE.nhost.app",
  // useCookies: true for using cookies (not recomended)
})

const auth = nhost.auth;
const storage = nhost.storage;

export { auth, storage };
```

To use cookies (not recomended), use this config:

```js
const nhostClient = createClient({
  baseURL: "https://backend-REPLACE.nhost.app",
  useCookies: true,
})
```

## Usage

```js
import { auth, storage } from "src/utils/nhost";
```

## Auth

### Register

```js
auth.register({ email, password });

// pass in registration options
auth.register({ email, password, { userData: { display_name: "Joe Doe" }} });
```

### Login

```js
auth.login({ email, password });

// or with a OAuth provider: google | github | linkedin ...
auth.login({ provider })
```

### Logout

```js
auth.logout();
```

### onAuthStateChanged

```js
auth.onAuthStateChanged((logged_in) => {
  console.log("auth state changed!");
  console.log({ logged_in });
});
```

### Check if user is authenticated

```js
auth.isAuthenticated();
```

Returns one of the following:

- `true` means the user is logged in
- `false` means the user is not logged in
- `null` means that a request to login the user is ongoing.

### Get JWT token

```js
auth.getJWTToken();
```

### Get claim from the JWT token

```js
auth.getClaim("x-hasura-user-id");
```

### Activate account

```js
auth.activate(<ticket>);
```

### Change email address

Note: The user must be logged in.

```js
auth.changeEmail(new_email);
```

### Request new email change

```js
auth.changeEmailRequest(new_email);
```

### Change to requested email

```js
auth.changeEmailChange(ticket);
```

### Change password

```js
auth.changePassword(old_password, new_password);
```

### Request new password

```js
auth.changePasswordRequest(email);
```

### Change password using ticket

```js
auth.changePasswordChange(new_password, ticket);
```

### Generate MFA QR-code

Note: User must be logged in.

```js
auth.MFAGenerate();
```

### Enable MFA

```js
auth.enable(code);
```

### Disable MFA

```js
auth.enable(code);
```

### Login using TOTP

Note: `ticket` comes from the `auth.login()` response if the user has MFA enabled.

```js
auth.MFATotp(code, ticket);
```

## Storage

### Upload

```js
storage.put(path, file, metadata?, onUploadProgress?);
```

### Delete

```js
storage.delete(path);
```

### Get metadata

```js
storage.getMetadata(path);
```

## Setup in different environments

### React Native

Install:

```bash
$ yarn add @react-native-community/async-storage
```

More info: [https://react-native-community.github.io/async-storage/docs/install](https://react-native-community.github.io/async-storage/docs/install).

```js
import nhost from "nhost-js-sdk";
import AsyncStorage from "@react-native-community/async-storage";

const config = {
  base_url: "https://backend-xxxx.nhost.app",
  client_storage: AsyncStorage,
  client_storage_type: "react-native",
};

nhost.initializeApp(config);

const auth = nhost.auth();
const storage = nhost.storage();

export { auth, storage };
```

### Ionic

```js
import createClient from "nhost-js-sdk";
import { Plugins } from "@capacitor/core";
const { Storage } = Plugins;

const nhostClient = createClient({
  baseURL: "https://backend-xxxx.nhost.app",
  clientStorage: Storage,
  clientStorageType: "capacitor
})

const auth = nhost.auth;
const storage = nhost.storage;

export { auth, storage };
```

### Expo

Install:

```bash
$ expo install expo-secure-store
```

More info: [https://docs.expo.io/versions/latest/sdk/securestore/](https://docs.expo.io/versions/latest/sdk/securestore/).

```js
import createClient from "nhost-js-sdk";
import * as SecureStore from "expo-secure-store";

const nhostClient = createClient({
  baseURL: "https://backend-xxxx.nhost.app",
  clientStorage: SecureStore,
  clientStorageType: "expo-secure-storage",
})

const auth = nhost.auth;
const storage = nhost.storage;

export { auth, storage };
```
